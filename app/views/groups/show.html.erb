<div class="flex justify-between">
  <%= link_to groups_path(@groups) do%>
    <button class="btn-secondary mb-4">Back to My Groups</button>
  <%end%>
  <%= link_to group_group_user_path(@group, current_user), data: { turbo_method: :delete, turbo_confirm: "Are you sure?" } do%>
    <button class="btn-danger">Leave Group</button>
  <%end %>
</div>
<div class="flex justify-between">
  <h1 class="text-4xl"> <%= @group.name %> </h1>
  <div>
    <%= link_to new_group_link_path(@group) do %>
      <button class="btn-primary">Add a Link</button>
    <% end %>
    <%= link_to group_group_users_path(@group) do%>
      <button class="btn-primary-outline">View Members</button>
    <%end%>
  </div>
</div>
<div class="grid grid-cols-4 gap-3">
  <% @links.each do |link| %>
    <div class="border shadow-md my-2 min-h-[300px] rounded-md flex-col p-4 flex justify-between items-center">
      <div class="text-center">
        <% if link[:metadata] %>
          <% if !link[:metadata]["images"].empty? %>
            <%= image_tag link[:metadata]["images"][0], class: "h-24 mb-2 mx-auto"%>
          <%else%>
            <%= image_tag 'link_placeholder.svg', class: "h-24 mb-2 mx-auto"%>
          <% end %>
          <% if link[:metadata]["title"] %>
            <h1 class="text-xl mb-3"> <%= link[:metadata]["title"]%></h1>
          <% else %>
            <h1 class="text-xl mb-3"> <%= link[:link].name %></h1>
          <% end %>
        <% end %>
      </div>
      <p> <%= truncate(link[:metadata]["description"], length: 72)%></p>
      <div class="mt-3 flex w-full justify-around">
        <%= link_to group_link_path(@group, link[:link]), data: { turbo_method: :delete, turbo_confirm: "Are you sure?" } do%>
          <button class="btn-danger">Remove</button>
        <%end %>
        <%= link_to link[:link].url, target: :_blank do %>
          <button class="btn-primary">Visit</button>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
